

### 基本流程

#### 请一定要仔细分析问题，沉着冷静的回答问题！

### 自我介绍

> 面试官你好，我叫丁富兵。98年生，今年25岁。20年毕业于淮北师范大学计算机科学与技术专业。现就职于上海钢银电子商务股份有限公司，于20年4月在上海钢银这家公司实习、转正，至今已有近三年的工作经验。公司主要从事钢贸垂直领域，致力服务钢贸大宗商品交易全流程、全链路，涉及业务包含线上交易、支付结算、在线融资，仓储物流等四部分，年gmv约2000亿左右。日常工作主要负责公司核心业务订单交易系统的维护和功能开发。主要使用Java语言进行开发，技术栈涉及到spring+mybatis+mysql，微服务之间的交互主要是分为rpc和http两种，dubbo和springcloud两种方式，中间件主要使用redis和rabbitMq等，以上就是我的自我介绍，谢谢

### 介绍一下你的工作内容



### 工作中遇到的问题



> 描述一下你们的订单号是如何生成的？
>
> 答：生成序列号的表支持多种业务模式，每一种业务模式是一条数据，后续根据业务模式去更新，生成订单号的规则是，比如商城的订单号是CS+年月日+10位数字表示这是今年第多少个订单，主要是通过乐观锁+悲观锁的形式去生成的。
>
> 首先判断这种业务模式是否存在，不存在则创建，存在则判断是否需要置0，因为有的是每日置0，有的是每年置0，再去更新数据，此时如果发生异常，比如说更新失败，或者插入失败，更新失败的异常时通过update语句返回的count记录来手动抛的异常，而插入失败肯定就是sql的异常了，都是duplicateKeyException，这里设置了业务模式的唯一键，如果是这两种异常则开启编程式事务，对当前记录行加锁，根据业务模式查询当前行，用的是 select for update ，加完锁之后继续走之前乐观锁的那一套流程，最后根据传入的参数进行format，返回订单号给客户端。



> 如何解决超卖的问题？
>
> 答：下单分为两种，一种是上架资源之后购买资源，一种是普通购买，订单如果购买的是上架的资源，则会进行资源校验，资源校验加了Synchronized的锁，对整个方法进行加锁，里面的处理逻辑大致是 先查询数据库中的库存，这里没有加行级锁，在进行资源的校验是否足够下单，如果不通过则返回，通过则发送扣货的消息，这个消息时通知es去增加或删减库存的，然后更新表中的剩余件数和剩余重量字段。这种方式其实不能够正在解决超卖的问题，而且即使如此，我们在付款前也是可以修改订单的，更多的关注是在于





### 技术问答 

> 　一般会根据遇到的问题里用到的技术栈来发问

Java相关知识

	1. 说说进程和线程的区别？
	2. 知道synchronized原理吗？
	3. 那锁的优化机制了解吗？
	4. 对于加锁，那再说下ReentrantLock原理？他和synchronized有什么区别？
	5. CAS的原理呢？
	6. 那么CAS有什么缺点吗？
	7. 说说HashMap原理吧？
	8. 那多线程环境怎么使用Map呢？ConcurrentHashmap了解过吗？
	9. volatile原理知道吗？
	10. 那么说说你对JMM内存模型的理解？为什么需要JMM？
	11. 说说ThreadLocal原理？
	12. 线程池原理知道吗？
	13. 拒绝策略有哪些？
	14. == 和 equals 的区别？
	15. HashMap和Hashtable的区别
	16. HashMap 的 table 的容量如何确定？loadFactor 是什么？该容量如何变化？这种变化会带来什么问题

数据库相关知识



中间件相关知识



### 算法



### 你有什么想要问我的吗？

* 可以介绍一下你们公司以及团队吗？
* 介绍一下这份工作的要求，以及胜任这份工作需要哪些技能和品质？





